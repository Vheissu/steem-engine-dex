<template>
    <header class="main-header">
        <div class="container-fluid main-container d-flex flex-column justify-content-end">
            <div class="row">
                <div class="col-6">
                    <h1>${'Tokens' & t}</h1>
                </div>
                <div class="col-3"></div>
                <div class="col-3 text-right">
                    <button class="button btn btn-primary" click.delegate="buyENG()">BUY ENG</button>
                </div>
            </div>

            
        </div>
    </header>

    <div class="container main-container">
        <div class="row">
            <div class="col-12">
                <div class="tabs">

                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <table class="table table-dark" ref="tokenTable">
                    <thead>
                        <tr>
                            <th class="no-sort"></th>
                            <th>${'Symbol' & t}</th>
                            <th>${'Name' & t}</th>
                            <th class="text-right">${'USD Value' & t}</th>
                            <th class="text-right">${'% Chg' & t}</th>
                            <th if.bind="state.loggedIn">${'Staked' & t}</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr repeat.for="token of state.tokens">
                            <td></td>
                            <td>
                                <img class="tokenIcon" src="${token.metadata.icon}" alt="${token.symbol}" title="${token.symbol}" /> 
                                <button if.bind="state.loggedIn" type="button" class="btn btn-icon btn-favourite ${token.isFavourite ? 'active' : ''}" click.delegate="favouriteToken(token)">
                                    <font-awesome-icon if.bind="token.isFavourite" icon.bind="['fas', 'star']"></font-awesome-icon>
                                    <font-awesome-icon else icon.bind="['far', 'star']"></font-awesome-icon>
                                </button>${token.symbol}
                            </td>
                            <td>${token.name}</td>
                            <td class="text-right">
                                <span class="changePercent ${token.priceChangePercent > 0 ? 'green' : token.priceChangePercent < 0 ? 'red' : ''}">
                                    ${token.usdValue}
                                </span>
                            </td>
                            <td class="text-right">
                                <span class="changePercent ${token.priceChangePercent > 0 ? 'green' : token.priceChangePercent < 0 ? 'red' : ''}">
                                    ${token.priceChangePercent.toFixed(2)}%
                                </span>
                            </td>
                            <td if.bind="state.loggedIn">${token.stake >= 0 ? parseFloat(token.stake) : '--'}</td>
                            <td class="table-buttons"><a route-href="route: exchange; params.bind: { symbol: token.symbol }">${'Market' & t}</a></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>
</template>
